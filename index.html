<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" />
    <title>Holi VR</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta name="description" content="A Holi WebXR experience using A-Frame">
    <script src="js/aframe.min.js"></script>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-spritesheet-component/dist/aframe-spritesheet-component.min.js"></script> -->
    <script src="https://unpkg.com/aframe-animation-component/dist/aframe-animation-component.min.js"></script>
    <script src="js/holi.js"></script> 

  </head>
  <body>
    <a-scene fog="type: linear; color: #FFC0CB; far: 6; near: 0;">
    <a-animation begin="showFog" attribute="fog.color" to="#ffca96" dur="2000"></a-animation>

    <a-assets>
      <!-- PEOPLE -->
      <img id="person-1" src="images/aunty.png">
      <img id="person-2" src="images/boy1.png">
      <img id="person-3" src="images/couple1.png">
      <img id="person-4" src="images/excited.png">
      <img id="person-5" src="images/family.png">
      <img id="person-6" src="images/guy1.png">
      <img id="person-7" src="images/jump.png">
      <img id="person-8" src="images/pareja.png">
      <img id="person-9" src="images/pareja1.png">
      <img id="person-10" src="images/couple2.png">
      <img id="person-11" src="images/couple3.png">
      <img id="person-12" src="images/couple4.png">
      <img id="person-13" src="images/couple5.png">
      <img id="person-14" src="images/girl1.png">
      <img id="person-15" src="images/grandpa1.png">
      
      <!-- EXPLOSION -->
      <!-- <img id="explosion-1" src="textures/sprites/explosion1.png">
      <img id="explosion-2" src="textures/sprites/holi.png">
      <img id="explosion-3" src="textures/sprites/explosion.gif"> -->
      <img id="blueExp" src="textures/sprites/explosion-blue.png">
      <img id="greenExp" src="textures/sprites/explosion-green.png">
      <img id="yellowExp" src="textures/sprites/explosion-yellow.png">
      <img id="purpleExp" src="textures/sprites/explosion-purple.png">
      <img id="pinkExp" src="textures/sprites/explosion-pink.png">
      <img id="redExp" src="textures/sprites/explosion-red.png">


      <!-- <video id="explosion-4" autoplay loop="true" src="textures/sprites/explosion.mp4" webkit-playsinline> -->


      <!-- TEXTURES -->
      <img id="floor" src="textures/patterns/color.jpg">
      <img id="background" src="textures/patterns/bg.jpg">
      <audio id="bgSong" src="song/song.mp3" preload="auto"></audio>


      <a-mixin id="text"
      text="
        align: center; 
        width: 10;
        value: Experience the \n Magic of Holi;
        color: #A61265;
        opacity: 1;"
      ></a-mixin>
      <a-mixin id="instructions"
      text="
        align: center; 
        width: 4;
        value: Use the yellow cursor to navigate \n across the screen. Hover over people \n in the next scene for a surprise!;
        color: #A61265;"
      ></a-mixin>
      <a-mixin id="start"
      text="
        align: center; 
        width: 4;
        value: Begin;
        color: #fff;"
      ></a-mixin>
      <a-mixin id="openingScene" text="
        align: center; 
        width: 4;
        value: Welcome! \n Look back here \n to end the experience;
        color: #ff8800;">
      </a-mixin>
    </a-assets>
    <!-- <a-scene fog="type: linear; color: #FFC0CB; far: 10; near: 0"> -->

      <!-- <a-entity id="camera" look-controls cursor="rayOrigin: mouse"></a-entity> -->

      <a-entity id="intro" visible="true">
        <a-sky id="bg" color="#FF00C1" material="src: #background;"></a-sky>
        <a-light 
          type="ambient" 
          color="#0080FF" 
          intensity="1"
          animation="
            property: intensity; 
            to: 0; 
            from: 1;
            dur: 2000; 
            loop: true;
            dir: alternate"
        ></a-light>
        <a-light
          type="point"
          color="yellow"
          position="0 0 -3"
          animation="
            property: position;
            from: 1 0 -3; 
            to: -1 0 -3; 
            dur: 5000; 
            loop: true;
            dir: alternate"
        >
        </a-light>
        <a-plane 
          position="0 0 -4"
          width="100" 
          height="100"
          id="intro-bg" 
          color="#FF00C1"
        ></a-plane>
        <a-text
          mixin="text" 
          position="0 1 -3"
          animation="
          property: opacity;
          from: 1; 
          to: 0; 
          dur: 1000; 
          delay: 5000"
        >
        </a-text>
        <a-text
          mixin="instructions" 
          position="0 1.2 -2"
          opacity="0"
          animation="
            property: opacity;
            from: 0; 
            to: 1; 
            dur: 1000; 
            delay: 5500"
        >
        </a-text>
        <!-- sound="src: url(song/song.mp3); on: mouseenter; loop: true"
              event-set__enterMain="_event: mouseenter; _target: #main; visible: true;"
            event-set__enterIntro="_event: mouseenter; _target: #intro; visible: false;" -->

        <a-entity audiohandler
          id="introBtn"
          geometry="primitive: plane; width: 1.2; height: 0.4;" 
          position="0 0.2 -3"
          material="color: #0080FF; opacity: 0"
          sound="src: #bgSong"
          animation="
            property: material.opacity;
            from: 0; 
            to: 1; 
            dur: 1000; 
            delay: 5500"
        ></a-entity>
        <a-text
          mixin="start" 
          position="0 0.2 -3"
          opacity="0"
          animation="
            property: opacity;
            from: 0; 
            to: 1; 
            dur: 1000; 
            delay: 5500"
        ></a-text>
      </a-entity>

      <a-entity id="main" visible="false">
        <a-sky id="bg" color="#F0FFFF" material="src: #background;"></a-sky>
        <a-plane position="0 -1 -4" rotation="-90 0 0" width="100" height="100" material="src: #floor; repeat: 20 20"></a-plane>
        <!-- <a-text mixin="openingScene" position="0 1 -3" animation="
            property: opacity;
            from: 1; 
            to: 0.2; 
            dur: 1000; 
            delay: 5000">
        </a-text> -->
        <a-text mixin="openingScene" position="-0.6 1 -3">
        </a-text>
              <a-entity id="endBtn" geometry="primitive: plane; height: 0.5; width: 1.3" material="color: #fff864"
                position="-0.8 0.3 -4" 
                text="width: 4; value: End Experience; align: center; color: #ff8800" animation="
                                property: material.opacity;
                                from: 0; 
                                to: 1; 
                                dur: 1000; 
                                delay: 2000" visible="false">
              </a-entity>
              <!-- <a-entity id="endBtn" look-controls geometry="primitive: plane; height: 0.5; width: auto" material="color: #fff864"
                position="0 0.5 -4" rotation="-90 0 0"
                text="width: 4; value: Are you sure you want to \n end the experience?; align: center; color: #ff8800" animation="
                                property: material.opacity;
                                from: 0; 
                                to: 1; 
                                dur: 1000; 
                                delay: 2000" visible="false">
              </a-entity> -->
        
        <a-entity id="aunty" geometry="primitive: plane; height: 1.5" position="-2 0.7 -2.8" 
          material="src: #person-1; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion-1; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-1; visible: false">
            <a-entity camera look-controls>
              <a-image id="explosion-1" transparent="true" alpha-test="0.5" src="#blueExp" position="0 0.2 0" visible="false"></a-image>
            </a-entity>
        </a-entity>

        <a-entity id="boy" rotation="5 40 0" geometry="primitive: plane; height: 1.5" position="-3 0.7 -1"
          material="src: #person-2; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion-2; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-2; visible: false">
            <a-entity camera look-controls>
              <a-image id="explosion-2" transparent="true" alpha-test="0.5" src="#pinkExp" position="0 0.2 0" visible="false"></a-image>
            </a-entity>
        </a-entity>

        <a-entity id="couple1" rotation="0 -100 0" geometry="primitive: plane; height: 1.5" position="3 0.7 2"
          material="src: #person-3; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion-3; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-3; visible: false">
            <a-entity camera look-controls>
              <a-image id="explosion-3" transparent="true" alpha-test="0.5" src="#purpleExp" position="0 0.2 0" visible="false" rotation="0 100 0"></a-image>
            </a-entity>
        </a-entity>

        <a-entity id="couple-jumping" rotation="0 -180 0" geometry="primitive: plane; height: 1.5; width:2" position="0 0.7 2"
          material="src: #person-8; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion-4; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-4; visible: false">
            <a-entity camera look-controls>
              <a-image id="explosion-4" transparent="true" alpha-test="0.5" src="#greenExp" position="0 0.2 0" visible="false"></a-image>
            </a-entity>
        </a-entity>

        <a-entity id="couple2" rotation="0 -180 0" geometry="primitive: plane; height: 1.9" position="-4 1 2"
        material="src: #person-9; transparent: true; opacity: 2; alpha-test: 0.5"
        event-set__enter="_event: mouseenter; _target: #explosion-5; visible: true"
        event-set__leave="_event: mouseleave; _target: #explosion-5; visible: false">
          <a-entity camera look-controls>
            <a-image id="explosion-5" transparent="true" alpha-test="0.5" src="#greenExp" position="0 0.2 0" visible="false"></a-image>
          </a-entity>
        </a-entity>

        <a-entity id="family" rotation="0 -190 0" geometry="primitive: plane; height: 1.5" position="-3 0.7 4"
          material="src: #person-5; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion-6; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-6; visible: false">
            <a-entity camera look-controls>
              <a-image id="explosion-6" transparent="true" alpha-test="0.5" src="#yellowExp" position="0 0.2 0" visible="false"></a-image>
            </a-entity>
        </a-entity>

        <a-entity id="guy1" rotation="0 -180 0" geometry="primitive: plane; height: 1.5" position="2 1 4"
          material="src: #person-6; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion-7; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-7; visible: false">
            <a-entity camera look-controls>
              <a-image id="explosion-7" transparent="true" alpha-test="0.5" src="#yellowExp" position="0 0.2 0" visible="false"></a-image>
            </a-entity>
        </a-entity>

        <a-entity id="girl1" geometry="primitive: plane; height: 1.2" position="1 0.7 -3.5"
          material="src: #person-14; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion-8; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-8; visible: false">
            <a-entity camera look-controls>
              <a-image id="explosion-8" transparent="true" alpha-test="0.5" src="#blueExp" position="0 0.2 -1" visible="false"></a-image>
            </a-entity>
        </a-entity>

        <a-entity id="excited" geometry="primitive: plane; height: 1.5; width: 2" position="3 0.7 -2"
          material="src: #person-4; transparent: true; opacity: 2"
          event-set__enter="_event: mouseenter; _target: #explosion-9; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion-9; visible: false">
          <a-light type="ambient" color="#fff"></a-light>
        
          <!-- <a-text id="cylinderText" value="This is a holi explosion" align="center" color="#FFF" visible="false" position="0 -0.55 0.55"
                    geometry="primitive: plane; width: 1.75" material="color: #333"></a-text> -->
          <!-- <a-entity id="explosion" geometry="primitive: plane; height: 1.5; width: 2" position="3 1.4 -1"
                    material="src: #explosion-1; transparent: true; opacity: 2"></a-entity> -->
        
          <a-entity camera look-controls>
            <a-image id="explosion-9" transparent="true" alpha-test="0.5" src="#purpleExp" position="0 0 0.2" visible="false"></a-image>
            <!-- <a-video id="explosion" width="3" height="3" position="0 0.5 0.4" transparent="true" src="#explosion-4" position="0 0 0.2"></a-video> -->
          </a-entity>
        </a-entity>
        </a-entity>
      
      <!-- <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box> -->
      <!-- <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder> -->
      <!-- <a-entity camera position="0 1 0">
            <a-cursor></a-cursor>
      </a-entity> -->


      <!-- <a-plane id="endBtn" color="#0080FF" height="2" width="5" rotation="-90 0 0"></a-plane> -->
      <!-- <a-box id="endBtn" color="#fdfd96" depth="2" height="5" rotation="0 0 0" position="0 0 0.2"></a-box> -->



      <a-camera position="0 1 0">
        <a-cursor color="#ff7b00"></a-cursor>
      </a-camera>

    </a-scene>
    <script type="text/javascript">
    </script>
  </body>
</html>
