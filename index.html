<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Holi VR</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta name="description" content="A Holi WebXR experience using A-Frame">
    <script src="js/aframe.min.js"></script>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-spritesheet-component/dist/aframe-spritesheet-component.min.js"></script>
    <script src="https://unpkg.com/aframe-animation-component/dist/aframe-animation-component.min.js"></script>
    <script src="js/holi.js"></script> 

  </head>
  <body>
    <a-scene fog="type: linear; color: #FFC0CB; far: 6; near: 0;">
    <a-animation begin="showFog" attribute="fog.color" to="#ffca96" dur="2000"></a-animation>

    <a-assets>
      <!-- PEOPLE -->
      <img id="person-1" src="images/aunty.png">
      <img id="person-2" src="images/boy1.png">
      <img id="person-3" src="images/couple1.png">
      <img id="person-4" src="images/excited.png">
      <img id="person-5" src="images/family.png">
      <img id="person-6" src="images/guy1.png">
      <img id="person-7" src="images/jump.png">
      <img id="person-8" src="images/pareja.png">
      <img id="person-9" src="images/pareja1.png">
      <img id="person-10" src="images/couple2.png">
      <img id="person-11" src="images/couple3.png">
      <img id="person-12" src="images/couple4.png">
      <img id="person-13" src="images/couple5.png">
      <img id="person-14" src="images/girl1.png">
      <img id="person-15" src="images/grandpa1.png">
      <img id="person-16" src="images/grandpa2.png">
      
      <!-- EXPLOSION -->
      <img id="explosion-1" src="textures/sprites/explosion1.png">
      <img id="explosion-2" src="textures/sprites/holi.png">
      <img id="explosion-3" src="textures/sprites/explosion.gif">
      <!-- EXPLOSION -->

      <img id="floor" src="textures/patterns/color.jpg">
      <img id="background" src="textures/patterns/bg.jpg">

      <a-mixin id="text"
      text="
        align: center; 
        width: 10;
        value: Experience the \n Magic of Holi;
        color: #A61265;
        opacity: 1;"
      ></a-mixin>
      <a-mixin id="start"
      text="
        align: center; 
        width: 4;
        value: Begin;
        color: #fff;"
      ></a-mixin>
    </a-assets>
    <!-- <a-scene fog="type: linear; color: #FFC0CB; far: 10; near: 0"> -->

      <!-- <a-entity id="camera" look-controls cursor="rayOrigin: mouse"></a-entity> -->

      <a-entity id="intro" visible="true">
        <a-sky id="bg" color="#FF00C1" material="src: #background;"></a-sky>
        <a-light 
          type="ambient" 
          color="#0080FF" 
          intensity="1"
          animation="
            property: intensity; 
            to: 0; 
            from: 1;
            dur: 2000; 
            loop: true;
            dir: alternate"
        ></a-light>
        <a-light
          type="point"
          color="yellow"
          position="0 0 -3"
          animation="
            property: position;
            from: 1 0 -3; 
            to: -1 0 -3; 
            dur: 5000; 
            loop: true;
            dir: alternate"
        >
        </a-light>
        <a-plane 
          position="0 0 -4"
          width="100" 
          height="100"
          id="intro-bg" 
          color="#FF00C1"
        ></a-plane>
        <a-text
          mixin="text" 
          position="0 1.2 -3"
        >
        </a-text>
        <a-entity 
          id="introBtn"
          geometry="primitive: plane; width: 1.2; height: 0.4;" 
          position="0 0.2 -3"
          event-set__enterMain="_event: mouseenter; _target: #main; visible: true;"
          event-set__enterIntro="_event: mouseenter; _target: #intro; visible: false;"
          sound="src: url(song/song.mp3); on: mouseenter; loop: true"
        ></a-entity>
        <a-text
          mixin="start" 
          position="0 0.2 -3"
        ></a-text>
      </a-entity>

      <a-entity id="main" visible="false">
        <a-sky id="bg" color="#F0FFFF" material="src: #background;"></a-sky>
        <a-plane position="0 0 -4" rotation="-90 0 0" width="100" height="100" material="src: #floor; repeat: 20 20"></a-plane>
        
        <a-entity id="aunty" geometry="primitive: plane; height: 1.5" position="-2 0.7 -2.8" 
          material="src: #person-1; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="boy" rotation="5 40 0" geometry="primitive: plane; height: 1.5" position="-3 0.7 -1"
          material="src: #person-2; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="couple1" rotation="0 -100 0" geometry="primitive: plane; height: 1.5" position="3 0.7 2"
          material="src: #person-3; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="couple-jumping" rotation="0 -180 0" geometry="primitive: plane; height: 1.5; width:2" position="0 0.7 2"
          material="src: #person-8; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="couple2" rotation="0 -180 0" geometry="primitive: plane; height: 1.9" position="-4 1 2"
        material="src: #person-9; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="family" rotation="0 -190 0" geometry="primitive: plane; height: 1.5" position="-3 0.7 4"
          material="src: #person-5; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="guy1" rotation="0 -180 0" geometry="primitive: plane; height: 1.5" position="2 1 4"
          material="src: #person-6; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="girl1" geometry="primitive: plane; height: 1.2" position="1 0.7 -4.5"
          material="src: #person-14; transparent: true; opacity: 2; alpha-test: 0.5"></a-entity>

        <a-entity id="excited" geometry="primitive: plane; height: 1.5" position="2 0.7 -2"
          material="src: #person-4; transparent: true; opacity: 2; alpha-test: 0.5"
          event-set__enter="_event: mouseenter; _target: #explosion; visible: true"
          event-set__leave="_event: mouseleave; _target: #explosion; visible: false"></a-entity>

        <a-light type="ambient" color="#fff"></a-light>

          <!-- <a-text id="cylinderText" value="This is a holi explosion" align="center" color="#FFF" visible="false" position="0 -0.55 0.55"
            geometry="primitive: plane; width: 1.75" material="color: #333"></a-text> -->
          <!-- <a-entity id="explosion" geometry="primitive: plane; height: 1.5; width: 2" position="3 1.4 -1"
            material="src: #explosion-1; transparent: true; opacity: 2"></a-entity> -->

            <a-entity camera look-controls>
              <a-image id="explosion"  transparent="true" alpha-test="0.5"  src="#explosion-2" 
                 position="0 0 0.2"></a-image>
            </a-entity>
          </a-entity>
      </a-entity>
      
      <!-- <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box> -->
      <!-- <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder> -->
      <!-- <a-entity camera position="0 1 0">
            <a-cursor></a-cursor>
      </a-entity> -->

      <a-camera position="0 1 0">
        <a-cursor color="#fdfd96"></a-cursor>
      </a-camera>

    </a-scene>
       <script type="text/javascript">
    </script>
  </body>
</html>
